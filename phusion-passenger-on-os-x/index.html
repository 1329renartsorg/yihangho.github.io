<!doctype html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=en><![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang=en><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang=en><![endif]--><!--[if gt IE 8]><!--><html class=no-js lang=en><!--<![endif]--><head><meta charset=utf-8><title>Phusion Passenger on OS X &#8211; I am Yihang</title><meta name=description content="Setting up Phusion Passenger on OS X with GCC 4.8 installed"><meta name=keywords content="Web Development, Ruby on Rails, Phusion Passenger"><meta name="twitter:card" content=summary><meta name="twitter:image" content="http://www.yihangho.com/images/"><meta name="twitter:title" content="Phusion Passenger on OS X"><meta name="twitter:description" content="Setting up Phusion Passenger on OS X with GCC 4.8 installed"><meta name="twitter:creator" content="@yihang5"><meta property="og:locale" content=en_US><meta property="og:type" content=article><meta property="og:title" content="Phusion Passenger on OS X"><meta property="og:description" content="Setting up Phusion Passenger on OS X with GCC 4.8 installed"><meta property="og:url" content="http://www.yihangho.com/phusion-passenger-on-os-x/"><meta property="og:site_name" content="I am Yihang"><link rel=canonical href="http://www.yihangho.com/phusion-passenger-on-os-x/"><link href="http://www.yihangho.com/feed.xml" type="application/atom+xml" rel=alternate title="I am Yihang Feed"><link rel=author href="http://plus.google.com/+YihangHo?rel=author"><meta name=HandheldFriendly content=True><meta name=MobileOptimized content=320><meta name=viewport content="width=device-width, initial-scale=1.0"><link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel=stylesheet><link rel=stylesheet href="http://www.yihangho.com/assets/css/main.min.css"><meta http-equiv=cleartype content=on><!--[if lt IE 9]><script src="http://www.yihangho.com/assets/js/vendor/html5shiv.min.js"></script><script src="http://www.yihangho.com/assets/js/vendor/respond.min.js"></script><![endif]--><script src="http://www.yihangho.com/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script></head><body class=post><!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--><div class=navigation-wrapper><div class=site-name><a href="http://www.yihangho.com">I am Yihang</a></div><div class=top-navigation><nav role=navigation id=site-nav class=nav><ul><li><a href="http://www.yihangho.com/about/">About</a></li><li><a href="http://www.yihangho.com/posts/">Posts</a></li><li><a href="http://www.yihangho.com/apps/">Apps</a></li></ul></nav></div></div><div id=main role=main><div class=article-author-side><img src="http://www.yihangho.com/images/bio-photo.jpg" class=bio-photo alt="Yihang Ho bio photo"></a><h3>Yihang Ho</h3><p>Coder</p><a href="http://twitter.com/yihang5" class=author-social target=_blank><i class=icon-twitter></i> Twitter</a><a href="http://facebook.com/yihangho" class=author-social target=_blank><i class=icon-facebook></i> Facebook</a><a href="http://plus.google.com/+YihangHo" class=author-social target=_blank><i class=icon-google-plus></i> Google+</a><a href="http://github.com/yihangho" class=author-social target=_blank><i class=icon-github></i> Github</a><a href="mailto:me@yihangho.com" class=author-social target=_blank><i class=icon-mail></i> Email</a></div><article><div class=headline-wrap><h1><a href="http://www.yihangho.com/phusion-passenger-on-os-x/" rel=bookmark title="Phusion Passenger on OS X">Phusion Passenger on OS X</a></h1></div><div class=article-wrap><p>I was introduced <a href="https://www.phusionpassenger.com/">Phusion Passenger</a> long time ago when I started learning Ruby on Rails. It is a web server and application server that is quite popular. Its website boasts that installation is simple and there are only two steps involve. The installation is indeed easy and simple, <em>if</em> you have are using all the default stuff that come with your OS.</p><p>A little bit of background - I am running OS X 10.8.4 (updating to 10.8.5 at the time of writing), Ruby 2.0.0p247 built by RVM and, most importantly, GCC/G++ 4.8.1. Long story short, GCC/G++ 4.8.1 is causing problem - disable it and use the default GCC/G++ provided by Apple. For me, the default version is 4.2.1.</p><p>What I have done before is to follow the installation guide:</p><ul><li><code>gem install passenger</code></li><li><code>passenger-install-apache2-module</code></li><li>At the end of the compilation, I was asked to add some lines to the configuration file of Apache. So I copied and pasted all those lines to the very end of <code>/etc/apache2/httpd.conf</code>.</li><li>Also, there is a suggested snippet to set up virtual host for rail projects. I did that to, and the virtual host serves a dummy application just created by <code>rails new</code>.</li><li><code>sudo apachectl restart</code></li><li>Visit the virtual host. Browser complains that ‘Oops! Google Chrome could not connect to…’ All the existing virtual hosts that were working are not working anymore.</li><li>Next I tried <code>httpd -t</code>. This is the output:</li></ul><pre><code>   httpd: Syntax error on line 513 of /private/etc/apache2/httpd.conf: Cannot load /Users/yihangho/.rvm/gems/ruby-2.0.0-p247/gems/passenger-4.0.17/buildout/apache2/mod_passenger.so into server: dlopen(/Users/yihangho/.rvm/gems/ruby-2.0.0-p247/gems/passenger-4.0.17/buildout/apache2/mod_passenger.so, 10): Symbol not found: __ZNSt3tr18__detail12__prime_listE\n  Referenced from: /Users/yihangho/.rvm/gems/ruby-2.0.0-p247/gems/passenger-4.0.17/buildout/apache2/mod_passenger.so\n  Expected in: flat namespace\n in /Users/yihangho/.rvm/gems/ruby-2.0.0-p247/gems/passenger-4.0.17/buildout/apache2/mod_passenger.so
</code></pre><p>I’ve been Googling a lot and nobody else seems to have this problem. Until I tried to use all the default tools - this includes GCC/G++. So what I did was to (temporarily) remove <code>/usr/local/bin</code> from my <code>PATH</code> variable (most likely they are set in <code>~/.bashrc</code>, <code>~/bash_profile</code> and/or <code>/etc/paths</code>), which effectively temporarily remove <em>ALL</em> homebrew installed application. I have to admit that the proper way is to <code>brew unlink gcc48</code> then <code>brew link gcc48</code> at the end. After you have done this, just trigger <code>passenger-install-apache2-module</code> and all should be good. <img class=emoji title=smile alt=smile src="https://github.global.ssl.fastly.net/images/icons/emoji/smile.png" height=20 width=20 align=absmiddle /></p><hr/><footer role=contentinfo><div class=article-author-bottom><img src="http://www.yihangho.com/images/bio-photo.jpg" class=bio-photo alt="Yihang Ho bio photo"></a><h3>Yihang Ho</h3><p>Coder</p><a href="http://twitter.com/yihang5" class=author-social target=_blank><i class=icon-twitter></i> Twitter</a><a href="http://facebook.com/yihangho" class=author-social target=_blank><i class=icon-facebook></i> Facebook</a><a href="http://plus.google.com/+YihangHo" class=author-social target=_blank><i class=icon-google-plus></i> Google+</a><a href="http://github.com/yihangho" class=author-social target=_blank><i class=icon-github></i> Github</a><a href="mailto:me@yihangho.com" class=author-social target=_blank><i class=icon-mail></i> Email</a></div><p class=byline><strong>Phusion Passenger on OS X</strong> was published on <time datetime="2013-09-13T00:00:00+08:00">September 13, 2013</time> by <a href="http://www.yihangho.com/about" title="About Yihang Ho">Yihang Ho</a>.</p></footer></div></article></div><div class=footer-wrap><div class=related-articles><h4>You might also enjoy <small class=pull-right>(<a href="http://www.yihangho.com/posts/">View all posts</a>)</small></h4><ul><li><a href="http://www.yihangho.com/raspberry-pi-vs-chromebook-for-education-use/" title="Raspberry Pi vs. Chromebook (for education use)">Raspberry Pi vs. Chromebook (for education use)</a></li><li><a href="http://www.yihangho.com/us-visa-application/" title="US Visa Application">US Visa Application</a></li><li><a href="http://www.yihangho.com/chrome-extension-development-in-a-nutshell/" title="Chrome Extension Development in a Nutshell">Chrome Extension Development in a Nutshell</a></li></ul><hr/></div><footer><span>&copy; 2014 Yihang Ho. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/">Minimal Mistakes</a> theme.</span></footer></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script>window.jQuery || document.write('<script src="http://www.yihangho.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script><script src="http://www.yihangho.com/assets/js/scripts.min.js"></script><script>var _paq=_paq||[];_paq.push(["trackPageView"]);_paq.push(["enableLinkTracking"]);(function(){var u=(("https:"==document.location.protocol)?"https":"http")+"://piwik-yihangho.rhcloud.com/";_paq.push(["setTrackerUrl",u+"piwik.php"]);_paq.push(["setSiteId","1"]);var d=document,g=d.createElement("script"),s=d.getElementsByTagName("script")[0];g.type="text/javascript";g.defer=true;g.async=true;g.src=u+"piwik.js";s.parentNode.insertBefore(g,s)})();</script></body></html>