<!DOCTYPE html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"><![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]--><!--[if gt IE 8]><!--><html class=no-js lang=en><!--<![endif]--><head><meta charset=utf-8><title>Data attribute with JavaScript and jQuery &#8211; I am Yihang</title><meta name=description content="Acessing data attributes with JavaScript and jQuery"><meta name=keywords content="Web development, JavaScript, jQuery, HTML5"><meta name=twitter:card content=summary><meta name=twitter:image content="http://www.yihangho.com/images/"><meta name=twitter:title content="Data attribute with JavaScript and jQuery"><meta name=twitter:description content="Acessing data attributes with JavaScript and jQuery"><meta name=twitter:creator content=@yihang5><meta property=og:locale content=en_US><meta property=og:type content=article><meta property=og:title content="Data attribute with JavaScript and jQuery"><meta property=og:description content="Acessing data attributes with JavaScript and jQuery"><meta property=og:url content="http://www.yihangho.com/data-attribute-with-javascript-and-jquery/"><meta property=og:site_name content="I am Yihang"><link rel=canonical href="http://www.yihangho.com/data-attribute-with-javascript-and-jquery/"><link href=http://www.yihangho.com/feed.xml type=application/atom+xml rel=alternate title="I am Yihang Feed"><link rel=author href="http://plus.google.com/+YihangHo?rel=author"><meta name=HandheldFriendly content=True><meta name=MobileOptimized content=320><meta name=viewport content="width=device-width, initial-scale=1.0"><link href="http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel=stylesheet><link rel=stylesheet href=http://www.yihangho.com/assets/css/main.min.css><meta http-equiv=cleartype content=on><!--[if lt IE 9]><script src="http://www.yihangho.com/assets/js/vendor/html5shiv.min.js"></script>
	<script src="http://www.yihangho.com/assets/js/vendor/respond.min.js"></script><![endif]--><script src=http://www.yihangho.com/assets/js/vendor/modernizr-2.7.1.custom.min.js></script><body class=post><!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--><div class=navigation-wrapper><div class=site-name><a href=http://www.yihangho.com>I am Yihang</a></div><div class=top-navigation><nav role=navigation id=site-nav class=nav><ul><li><a href="http://www.yihangho.com/about/">About</a></li><li><a href="http://www.yihangho.com/posts/">Posts</a></li><li><a href="http://www.yihangho.com/apps/">Apps</a></li></ul></nav></div></div><div id=main role=main><div class=article-author-side><img src=http://www.yihangho.com/images/bio-photo.jpg class=bio-photo alt="Yihang Ho bio photo"><h3>Yihang Ho</h3><p>Coder</p><a href=http://twitter.com/yihang5 class=author-social target=_blank><i class=icon-twitter></i> Twitter</a> <a href=http://facebook.com/yihangho class=author-social target=_blank><i class=icon-facebook></i> Facebook</a> <a href=http://plus.google.com/+YihangHo class=author-social target=_blank><i class=icon-google-plus></i> Google+</a> <a href=http://github.com/yihangho class=author-social target=_blank><i class=icon-github></i> Github</a> <a href=mailto:me@yihangho.com class=author-social target=_blank><i class=icon-mail></i> Email</a></div><article><div class=headline-wrap><h1><a href="http://www.yihangho.com/data-attribute-with-javascript-and-jquery/" rel=bookmark title="Data attribute with JavaScript and jQuery">Data attribute with JavaScript and jQuery</a></h1></div><div class=article-wrap><p>One thing from HTML5 that fascinates me a lot is the <code>data-</code> attribute. It helps eliminating some clumsiness that happen before HTML5 especially when writing a single-page application. For example, sometimes we need to use a hidden input to store some temporary states. Those data can be stored in the <code>data-</code> attribute.</p><div><div class=CodeRay><div class=code><pre><span class=line-numbers><a href=#n1 name=n1>1</a></span><span style=color:#070;font-weight:bold>&lt;form&gt;</span>
<span class=line-numbers><a href=#n2 name=n2>2</a></span>    <span style=color:#070;font-weight:bold>&lt;input</span> <span style=color:#b48>type</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>hidden</span><span style=color:#710>&quot;</span></span> <span style=color:#b48>name</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>user-id</span><span style=color:#710>&quot;</span></span> <span style=color:#b48>value</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>12345</span><span style=color:#710>&quot;</span></span><span style=color:#070;font-weight:bold>&gt;</span>
<span class=line-numbers><a href=#n3 name=n3>3</a></span>    <span style=color:#070;font-weight:bold>&lt;input</span> <span style=color:#b48>type</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>text</span><span style=color:#710>&quot;</span></span> <span style=color:#b48>name</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>fname</span><span style=color:#710>&quot;</span></span><span style=color:#070;font-weight:bold>&gt;</span>
<span class=line-numbers><a href=#n4 name=n4>4</a></span><span style=color:#070;font-weight:bold>&lt;/form&gt;</span>
</pre></div></div></div><p>can be replaced with</p><div><div class=CodeRay><div class=code><pre><span class=line-numbers><a href=#n1 name=n1>1</a></span><span style=color:#070;font-weight:bold>&lt;form</span> <span style=color:#b48>data-user-id</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>12345</span><span style=color:#710>&quot;</span></span><span style=color:#070;font-weight:bold>&gt;</span>
<span class=line-numbers><a href=#n2 name=n2>2</a></span>    <span style=color:#070;font-weight:bold>&lt;input</span> <span style=color:#b48>type</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>text</span><span style=color:#710>&quot;</span></span> <span style=color:#b48>name</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>fname</span><span style=color:#710>&quot;</span></span><span style=color:#070;font-weight:bold>&gt;</span>
<span class=line-numbers><a href=#n3 name=n3>3</a></span><span style=color:#070;font-weight:bold>&lt;/form&gt;</span>
</pre></div></div></div><p>Another advantage of <code>data-</code> attribute is the ability to write unobtrusive JavaScript. If you have seen the HTML code generated by Ruby on Rails, you will understand. Suppose you want to show the user a confirmation box after the user clicked on a link. Without the <code>data-</code> attribute, we have to do this</p><div><div class=CodeRay><div class=code><pre><span class=line-numbers><a href=#n1 name=n1>1</a></span><span style=color:#070;font-weight:bold>&lt;a</span> <span style=color:#b48>href</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>http://www.example.com</span><span style=color:#710>&quot;</span></span> <span style=color:#b48>onclick</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#080;font-weight:bold>return</span> confirm(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>'</span><span style=color:#D20>Are you sure?</span><span style=color:#710>'</span></span>);<span style=color:#710>&quot;</span></span><span style=color:#070;font-weight:bold>&gt;</span>Click me!<span style=color:#070;font-weight:bold>&lt;/a&gt;</span>
</pre></div></div></div><p>which is kind of not nice as we have to inline some JavaScript code. With <code>data-</code> attribute, however, we can do this</p><div><div class=CodeRay><div class=code><pre><span class=line-numbers><a href=#n1 name=n1>1</a></span><span style=color:#777>&lt;!-- index.html --&gt;</span>
<span class=line-numbers><a href=#n2 name=n2>2</a></span><span style=color:#070;font-weight:bold>&lt;a</span> <span style=color:#b48>href</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>http://www.example.com</span><span style=color:#710>&quot;</span></span> <span style=color:#b48>data-confirmation</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>Are you sure?</span><span style=color:#710>&quot;</span></span><span style=color:#070;font-weight:bold>&gt;</span>Click me!<span style=color:#070;font-weight:bold>&lt;/a&gt;</span>
<span class=line-numbers><a href=#n3 name=n3>3</a></span><span style=color:#070;font-weight:bold>&lt;script</span> <span style=color:#b48>src</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>script.js</span><span style=color:#710>&quot;</span></span><span style=color:#070;font-weight:bold>&gt;</span><span style=color:#070;font-weight:bold>&lt;/script&gt;</span>
</pre></div></div></div><div><div class=CodeRay><div class=code><pre><span class=line-numbers><a href=#n1 name=n1>1</a></span><span style=color:#777>// script.js</span>
<span class=line-numbers><a href=#n2 name=n2>2</a></span><span style=color:#080;font-weight:bold>var</span> anchors = document.getElementsByTagName(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>a</span><span style=color:#710>&quot;</span></span>);
<span class=line-numbers><a href=#n3 name=n3>3</a></span><span style=color:#080;font-weight:bold>for</span> (<span style=color:#080;font-weight:bold>var</span> i = <span style=color:#00D>0</span>; i &lt; anchors.length; i++) {
<span class=line-numbers><a href=#n4 name=n4>4</a></span>    anchors[i].onclick = anchorOnClickListener;
<span class=line-numbers><a href=#n5 name=n5>5</a></span>}
<span class=line-numbers><a href=#n6 name=n6>6</a></span><span style=color:#080;font-weight:bold>function</span> <span style=color:#06B;font-weight:bold>anchorOnClickListener</span>() {
<span class=line-numbers><a href=#n7 name=n7>7</a></span>    <span style=color:#080;font-weight:bold>return</span> <span style=color:#950>this</span>.dataset.confirmation ? confirm(<span style=color:#950>this</span>.dataset.confirmation) : <span style=color:#069>true</span>;
<span class=line-numbers><a href=#n8 name=n8>8</a></span>}
</pre></div></div></div><p>As we can see, although the second method results in a much longer code, we will also enjoy all the benefits that come with writing obtrusive JavaScript.</p><p>Our beloved jQuery, as expected, handles <code>data-</code> attributes gracefully. There is a dedicated method to do this - <a href="http://api.jquery.com/data/"><code>.data()</code></a>. In the first example, we can retrieve the <code>data-user-id</code> attribute with</p><div><div class=CodeRay><div class=code><pre><span class=line-numbers><a href=#n1 name=n1>1</a></span><span style=color:#369;font-weight:bold>$</span>(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>form</span><span style=color:#710>&quot;</span></span>).data(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>user-id</span><span style=color:#710>&quot;</span></span>);
</pre></div></div></div><p>Updating <code>data-</code> attributes can be done in a similar fashion:</p><div><div class=CodeRay><div class=code><pre><span class=line-numbers><a href=#n1 name=n1>1</a></span><span style=color:#369;font-weight:bold>$</span>(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>form</span><span style=color:#710>&quot;</span></span>).data(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>user-id</span><span style=color:#710>&quot;</span></span>, <span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>new-user-id</span><span style=color:#710>&quot;</span></span>);
</pre></div></div></div><p>However, if you try to inspect the element that you have just updated its <code>data-</code> attribute, you might notice that the old value is still there. In this case, <code>data-user-id</code> is still <code>12345</code> instead of <code>new-user-id</code>. It turns out that jQuery do not update <code>data-</code> attributes directly, instead, the new or updated value is stored in a cache variable and is associated with the DOM of the said element. To verify this, use the developer’s console and set then retrieve the <code>data-</code> attribute.</p><div><div class=CodeRay><div class=code><pre><span class=line-numbers><a href=#n1 name=n1>1</a></span><span style=color:#777>&lt;!-- Insert this part in a HTML file --&gt;</span>
<span class=line-numbers><a href=#n2 name=n2>2</a></span><span style=color:#070;font-weight:bold>&lt;div</span> <span style=color:#b48>id</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>demo-div</span><span style=color:#710>&quot;</span></span> <span style=color:#b48>data-number</span>=<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>1</span><span style=color:#710>&quot;</span></span><span style=color:#070;font-weight:bold>&gt;</span><span style=color:#070;font-weight:bold>&lt;/div&gt;</span>
</pre></div></div></div><p>and enter these into the console, one line after the other</p><div><div class=CodeRay><div class=code><pre><span class=line-numbers><a href=#n1 name=n1>1</a></span><span style=color:#369;font-weight:bold>$</span>(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>div#demo-div</span><span style=color:#710>&quot;</span></span>).data(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>number</span><span style=color:#710>&quot;</span></span>); <span style=color:#777>//You should get 1</span>
<span class=line-numbers><a href=#n2 name=n2>2</a></span><span style=color:#369;font-weight:bold>$</span>(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>div#demo-div</span><span style=color:#710>&quot;</span></span>).data(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>number</span><span style=color:#710>&quot;</span></span>, <span style=color:#00D>2</span>); <span style=color:#777>//Check the HTML after entering this line to verify that data-number still appears to be 1</span>
<span class=line-numbers><a href=#n3 name=n3>3</a></span><span style=color:#369;font-weight:bold>$</span>(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>div#demo-div</span><span style=color:#710>&quot;</span></span>).data(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>number</span><span style=color:#710>&quot;</span></span>); <span style=color:#777>//You should get 2</span>
</pre></div></div></div><p>So what is the impact of the way jQuery is handling <code>data-</code> attributes? First of all, you <em>cannot</em> access updated <code>data-</code> attribute using non-jQuery JavaScript. Continuing the previous example,</p><div><div class=CodeRay><div class=code><pre><span class=line-numbers><a href=#n1 name=n1>1</a></span><span style=color:#369;font-weight:bold>$</span>(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>div#demo-div</span><span style=color:#710>&quot;</span></span>).data(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>number</span><span style=color:#710>&quot;</span></span>, <span style=color:#00D>2</span>); <span style=color:#777>//Just to make sure it is re-updated using jQuery</span>
<span class=line-numbers><a href=#n2 name=n2>2</a></span>document.getElementById(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>demo-div</span><span style=color:#710>&quot;</span></span>).dataset.number; <span style=color:#777>//You will still get 1</span>
</pre></div></div></div><p>But the other way works, that it, jQuery can access <code>data-</code> attributes updated by non-jQuery JavaScript.</p><div><div class=CodeRay><div class=code><pre><span class=line-numbers><a href=#n1 name=n1>1</a></span><span style=color:#369;font-weight:bold>$</span>(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>div#demo-div</span><span style=color:#710>&quot;</span></span>).data(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>number</span><span style=color:#710>&quot;</span></span>, <span style=color:#00D>2</span>); <span style=color:#777>//Re-update with jQuery</span>
<span class=line-numbers><a href=#n2 name=n2>2</a></span>document.getElementById(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>demo-div</span><span style=color:#710>&quot;</span></span>).dataset.number = <span style=color:#00D>3</span>; <span style=color:#777>//Update with non-jQuery JavaScript</span>
<span class=line-numbers><a href=#n3 name=n3>3</a></span><span style=color:#369;font-weight:bold>$</span>(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>div#demo-div</span><span style=color:#710>&quot;</span></span>).data(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>number</span><span style=color:#710>&quot;</span></span>); <span style=color:#777>//Expect 3</span>
</pre></div></div></div><p>By using the jQuery <code>.data()</code> method, you can set any <code>data-</code> attributes to almost anything, including arrays and objects:</p><div><div class=CodeRay><div class=code><pre><span class=line-numbers><a href=#n1 name=n1>1</a></span><span style=color:#369;font-weight:bold>$</span>(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>div#demo-div</span><span style=color:#710>&quot;</span></span>).data(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>another</span><span style=color:#710>&quot;</span></span>, { <span style=color:#606>hello</span>: <span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>World</span><span style=color:#710>&quot;</span></span> });
</pre></div></div></div><p>In <em>most</em> cases, the behavior of jQuery shouldn’t be a very big issue. In case it really is, just remember that there is the faithful <code>.attr()</code> method.</p><div><div class=CodeRay><div class=code><pre><span class=line-numbers><a href=#n1 name=n1>1</a></span><span style=color:#369;font-weight:bold>$</span>(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>div#demo-div</span><span style=color:#710>&quot;</span></span>).attr(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>data-number</span><span style=color:#710>&quot;</span></span>, <span style=color:#00D>10</span>); <span style=color:#777>//Verify that HTML is being updated also</span>
<span class=line-numbers><a href=#n2 name=n2>2</a></span>document.getElementById(<span style=background-color:hsla(0,100%,50%,0.05)><span style=color:#710>&quot;</span><span style=color:#D20>demo-div</span><span style=color:#710>&quot;</span></span>).dataset.number; <span style=color:#777>//Expect 10</span>
</pre></div></div></div><hr><footer role=contentinfo><div class=article-author-bottom><img src=http://www.yihangho.com/images/bio-photo.jpg class=bio-photo alt="Yihang Ho bio photo"><h3>Yihang Ho</h3><p>Coder</p><a href=http://twitter.com/yihang5 class=author-social target=_blank><i class=icon-twitter></i> Twitter</a> <a href=http://facebook.com/yihangho class=author-social target=_blank><i class=icon-facebook></i> Facebook</a> <a href=http://plus.google.com/+YihangHo class=author-social target=_blank><i class=icon-google-plus></i> Google+</a> <a href=http://github.com/yihangho class=author-social target=_blank><i class=icon-github></i> Github</a> <a href=mailto:me@yihangho.com class=author-social target=_blank><i class=icon-mail></i> Email</a></div><p class=byline><strong>Data attribute with JavaScript and jQuery</strong> was published on <time datetime=2013-08-18T00:00:00+08:00>August 18, 2013</time> and last modified on <time datetime=2013-11-05>November 05, 2013</time> by <a href=http://www.yihangho.com/about title="About Yihang Ho">Yihang Ho</a>.</p></footer></div></article></div><div class=footer-wrap><div class=related-articles><h4>You might also enjoy <small class=pull-right>(<a href="http://www.yihangho.com/posts/">View all posts</a>)</small></h4><ul><li><a href="http://www.yihangho.com/chrome-extension-development-in-a-nutshell/" title="Chrome Extension Development in a Nutshell">Chrome Extension Development in a Nutshell</a></li><li><a href="http://www.yihangho.com/raspberry-pi-vs-chromebook-for-education-use/" title="Raspberry Pi vs. Chromebook (for education use)">Raspberry Pi vs. Chromebook (for education use)</a></li><li><a href="http://www.yihangho.com/us-visa-application/" title="US Visa Application">US Visa Application</a></li></ul><hr></div><footer><span>&copy; 2014 Yihang Ho. Powered by <a href=http://jekyllrb.com>Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/">Minimal Mistakes</a> theme.</span></footer></div><script src=//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js></script><script>window.jQuery || document.write('<script src="http://www.yihangho.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script><script src=http://www.yihangho.com/assets/js/scripts.min.js></script>