<!DOCTYPE html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"><![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]--><!--[if gt IE 8]><!--><html class=no-js lang=en><!--<![endif]--><head><meta charset=utf-8><title>Data attribute with JavaScript and jQuery &#8211; I am Yihang</title><meta name=description content="Acessing data attributes with JavaScript and jQuery"><meta name=keywords content="Web development, JavaScript, jQuery, HTML5"><meta name=twitter:card content=summary><meta name=twitter:image content="http://www.yihangho.com/images/"><meta name=twitter:title content="Data attribute with JavaScript and jQuery"><meta name=twitter:description content="Acessing data attributes with JavaScript and jQuery"><meta name=twitter:creator content=@yihang5><meta property=og:locale content=en_US><meta property=og:type content=article><meta property=og:title content="Data attribute with JavaScript and jQuery"><meta property=og:description content="Acessing data attributes with JavaScript and jQuery"><meta property=og:url content=http://www.yihangho.com/data-attribute-with-javascript-and-jquery><meta property=og:site_name content="I am Yihang"><link rel=canonical href=http://www.yihangho.com/data-attribute-with-javascript-and-jquery><link href=http://www.yihangho.com/feed.xml type=application/atom+xml rel=alternate title="I am Yihang Feed"><link rel=author href="https://plus.google.com/+YihangHo/?rel=author"><meta name=HandheldFriendly content=True><meta name=MobileOptimized content=320><meta name=viewport content="width=device-width, initial-scale=1.0"><link href="http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel=stylesheet><link rel=stylesheet href=http://www.yihangho.com/assets/css/main.min.css><!--[if (lt IE 9) & (!IEMobile)]><link rel="stylesheet" href="http://www.yihangho.com/assets/css/ie.min.css"><![endif]--><meta http-equiv=cleartype content=on><script src=http://www.yihangho.com/assets/js/vendor/modernizr-2.6.2.custom.min.js></script><body class=article itemscope itemtype=http://schema.org/WebPage><!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--><div class=navigation-wrapper><div class=site-name><a href=http://www.yihangho.com>I am Yihang</a></div><div class=top-navigation><nav role=navigation itemscope itemtype=http://schema.org/SiteNavigationElement><ul><li><a href=http://www.yihangho.com/about>About</a></li><li><a href=http://www.yihangho.com/articles>Articles</a></li><li><a href=http://www.yihangho.com/apps>Apps</a></li><li><i class=icon-feed></i> <a href=http://www.yihangho.com/feed.xml title="Atom/RSS feed">Feed</a></li></ul></nav></div></div><div id=main role=main itemprop=mainContentOfPage itemscope itemtype=http://schema.org/Blog><div class=article-author-top><img src=http://www.yihangho.com/images/bio-photo.jpg class=bio-photo alt="Yihang Ho bio photo"><h3>Yihang Ho</h3><p>Coder</p><a href=http://twitter.com/yihang5 class=author-social target=_blank><i class=icon-twitter></i> Twitter</a> <a href=http://facebook.com/yihangho class=author-social target=_blank><i class=icon-facebook></i> Facebook</a> <a href="https://plus.google.com/+YihangHo/" class=author-social target=_blank><i class=icon-google-plus></i> Google+</a> <a href=http://github.com/yihangho class=author-social target=_blank><i class=icon-github></i> Github</a> <a href=mailto:me@yihangho.com class=author-social target=_blank><i class=icon-mail></i> Email</a></div><article itemscope itemtype=http://schema.org/BlogPosting itemprop=blogPost><div class=headline-wrap><h1 itemprop=name>Data attribute with JavaScript and jQuery</h1><h2></h2></div><div class=article-wrap itemprop=text><p>One thing from HTML5 that fascinates me a lot is the <code>data-</code> attribute. It helps eliminating some clumsiness that happen before HTML5 especially when writing a single-page application. For example, sometimes we need to use a hidden input to store some temporary states. Those data can be stored in the <code>data-</code> attribute.</p><pre><code class=language-html>&lt;form&gt;
    &lt;input type="hidden" name="user-id" value="12345"&gt;
    &lt;input type="text" name="fname"&gt;
&lt;/form&gt;
</code></pre><p>can be replaced with</p><pre><code class=language-html>&lt;form data-user-id="12345"&gt;
    &lt;input type="text" name="fname"&gt;
&lt;/form&gt;
</code></pre><p>Another advantage of <code>data-</code> attribute is the ability to write unobtrusive JavaScript. If you have seen the HTML code generated by Ruby on Rails, you will understand. Suppose you want to show the user a confirmation box after the user clicked on a link. Without the <code>data-</code> attribute, we have to do this</p><pre><code class=language-html>&lt;a href="http://www.example.com" onclick="return confirm('Are you sure?');"&gt;Click me!&lt;/a&gt;
</code></pre><p>which is kind of not nice as we have to inline some JavaScript code. With <code>data-</code> attribute, however, we can do this</p><pre><code class=language-html>&lt;!-- index.html --&gt;
&lt;a href="http://www.example.com" data-confirmation="Are you sure?"&gt;Click me!&lt;/a&gt;
&lt;script src="script.js"&gt;&lt;/script&gt;
</code></pre><pre><code class=language-javascript>// script.js
var anchors = document.getElementsByTagName("a");
for (var i = 0; i &lt; anchors.length; i++) {
    anchors[i].onclick = anchorOnClickListener;
}
function anchorOnClickListener() {
    return this.dataset.confirmation ? confirm(this.dataset.confirmation) : true;
}
</code></pre><p>As we can see, although the second method results in a much longer code, we will also enjoy all the benefits that come with writing obtrusive JavaScript.</p><p>Our beloved jQuery, as expected, handles <code>data-</code> attributes gracefully. There is a dedicated method to do this - <a href="http://api.jquery.com/data/"><code>.data()</code></a>. In the first example, we can retrieve the <code>data-user-id</code> attribute with</p><pre><code class=language-javascript>$("form").data("user-id");
</code></pre><p>Updating <code>data-</code> attributes can be done in a similar fashion:</p><pre><code class=language-javascript>$("form").data("user-id", "new-user-id");
</code></pre><p>However, if you try to inspect the element that you have just updated its <code>data-</code> attribute, you might notice that the old value is still there. In this case, <code>data-user-id</code> is still <code>12345</code> instead of <code>new-user-id</code>. It turns out that jQuery do not update <code>data-</code> attributes directly, instead, the new or updated value is stored in a cache variable and is associated with the DOM of the said element. To verify this, use the developer’s console and set then retrieve the <code>data-</code> attribute.</p><pre><code class=language-html>&lt;!-- Insert this part in a HTML file --&gt;
&lt;div id="demo-div" data-number="1"&gt;&lt;/div&gt;
</code></pre><p>and enter these into the console, one line after the other</p><pre><code class=language-javascript>$("div#demo-div").data("number"); //You should get 1
$("div#demo-div").data("number", 2); //Check the HTML after entering this line to verify that data-number still appears to be 1
$("div#demo-div").data("number"); //You should get 2
</code></pre><p>So what is the impact of the way jQuery is handling <code>data-</code> attributes? First of all, you <em>cannot</em> access updated <code>data-</code> attribute using non-jQuery JavaScript. Continuing the previous example,</p><pre><code class=language-javascript>$("div#demo-div").data("number", 2); //Just to make sure it is re-updated using jQuery
document.getElementById("demo-div").dataset.number; //You will still get 1
</code></pre><p>But the other way works, that it, jQuery can access <code>data-</code> attributes updated by non-jQuery JavaScript.</p><pre><code class=language-javascript>$("div#demo-div").data("number", 2); //Re-update with jQuery
document.getElementById("demo-div").dataset.number = 3; //Update with non-jQuery JavaScript
$("div#demo-div").data("number"); //Expect 3
</code></pre><p>By using the jQuery <code>.data()</code> method, you can set any <code>data-</code> attributes to almost anything, including arrays and objects:</p><pre><code class=language-javascript>$("div#demo-div").data("another", { hello: "World" });
</code></pre><p>In <em>most</em> cases, the behavior of jQuery shouldn’t be a very big issue. In case it really is, just remember that there is the faithful <code>.attr()</code> method.</p><pre><code class=language-javascript>$("div#demo-div").attr("data-number", 10); //Verify that HTML is being updated also
document.getElementById("demo-div").dataset.number; //Expect 10
</code></pre><div style=text-align:center><p><div data-selector=div.article-wrap data-options={} data-role=spritzer></div></p></div><hr><footer role=contentinfo><div class=article-author-bottom><img src=http://www.yihangho.com/images/bio-photo.jpg class=bio-photo alt="Yihang Ho bio photo"><h3>Yihang Ho</h3><p>Coder</p><a href=http://twitter.com/yihang5 class=author-social target=_blank><i class=icon-twitter></i> Twitter</a> <a href=http://facebook.com/yihangho class=author-social target=_blank><i class=icon-facebook></i> Facebook</a> <a href="https://plus.google.com/+YihangHo/" class=author-social target=_blank><i class=icon-google-plus></i> Google+</a> <a href=http://github.com/yihangho class=author-social target=_blank><i class=icon-github></i> Github</a> <a href=mailto:me@yihangho.com class=author-social target=_blank><i class=icon-mail></i> Email</a></div><p class=byline><strong>Data attribute with JavaScript and jQuery</strong> was published on <time datetime=2013-08-18T00:00:00+08:00 itemprop=datePublished>August 18, 2013</time> and last modified on <time datetime=2013-11-05 itemprop=dateModified>November 05, 2013</time> by <span itemprop=author itemscope itemtype=http://schema.org/Person><span itemprop=name><a href=http://www.yihangho.com/about title="About Yihang Ho" itemprop=url>Yihang Ho</a></span></span>.</p></footer></div></article></div><div class=footer-wrap><div class=related-articles><h4>You might also enjoy <small class=pull-right>(<a href=http://www.yihangho.com/articles>View all articles</a>)</small></h4><ul><li><a href=http://www.yihangho.com/bezier title=Bézier>Bézier</a></li><li><a href=http://www.yihangho.com/spritz-for-jekyll title="Spritz for Jekyll">Spritz for Jekyll</a></li><li><a href=http://www.yihangho.com/biology-and-computer-science title="Biology and Computer Science">Biology and Computer Science</a></li></ul><hr></div><footer><span>&copy; 2014 Yihang Ho. Powered by <a href=http://jekyllrb.com>Jekyll</a> using the <a href="http://mademistakes.com/">Minimal Mistakes</a> theme.</span></footer></div><script src=//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js></script><script>window.jQuery || document.write('<script src="http://www.yihangho.com/assets/js/vendor/jquery-1.11.0.min.js"><\/script>')</script><script src=http://www.yihangho.com/assets/js/scripts.min.js></script><script>window.jQuery || document.write('<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js">\x3C/script>');
var SpritzSettings = {
clientId: "1e621458778214a7c",
redirectUri: "http://www.yihangho.com/login_success.html"
};
if (!(/^https?:\/\//i.test(SpritzSettings.redirectUri))) {
SpritzSettings.redirectUri = window.location.protocol + "//" + window.location.host + SpritzSettings.redirectUri;
}</script><script id=spritzjs src=//sdk.spritzinc.com/js/1.0/js/spritz.min.js></script><script>var _paq=_paq||[];_paq.push(["trackPageView"]);_paq.push(["enableLinkTracking"]);(function(){var u=(("https:"==document.location.protocol)?"https":"http")+"://piwik-yihangho.rhcloud.com/";_paq.push(["setTrackerUrl",u+"piwik.php"]);_paq.push(["setSiteId","1"]);var d=document,g=d.createElement("script"),s=d.getElementsByTagName("script")[0];g.type="text/javascript";g.defer=true;g.async=true;g.src=u+"piwik.js";s.parentNode.insertBefore(g,s)})();</script>