<!DOCTYPE html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"><![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]--><!--[if gt IE 8]><!--><html class=no-js lang=en><!--<![endif]--><head><meta charset=utf-8><title>Homebrew and ClamXav &#8211; I am Yihang</title><meta name=description content="Getting Hombrew and ClamXav to work together"><meta name=keywords content="Homebrew, OS X, ClamXav"><meta name=twitter:card content=summary><meta name=twitter:image content="http://www.yihangho.com/images/"><meta name=twitter:title content="Homebrew and ClamXav"><meta name=twitter:description content="Getting Hombrew and ClamXav to work together"><meta name=twitter:creator content=@yihang5><meta property=og:locale content=en_US><meta property=og:type content=article><meta property=og:title content="Homebrew and ClamXav"><meta property=og:description content="Getting Hombrew and ClamXav to work together"><meta property=og:url content=http://www.yihangho.com/homebrew-and-clamxav><meta property=og:site_name content="I am Yihang"><link rel=canonical href=http://www.yihangho.com/homebrew-and-clamxav><link href=http://www.yihangho.com/feed.xml type=application/atom+xml rel=alternate title="I am Yihang Feed"><link rel=author href="https://plus.google.com/+YihangHo/?rel=author"><meta name=HandheldFriendly content=True><meta name=MobileOptimized content=320><meta name=viewport content="width=device-width, initial-scale=1.0"><link href="http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel=stylesheet><link rel=stylesheet href=http://www.yihangho.com/assets/css/main.min.css><!--[if (lt IE 9) & (!IEMobile)]><link rel="stylesheet" href="http://www.yihangho.com/assets/css/ie.min.css"><![endif]--><meta http-equiv=cleartype content=on><script src=http://www.yihangho.com/assets/js/vendor/modernizr-2.6.2.custom.min.js></script><body class=article itemscope itemtype=http://schema.org/WebPage><!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--><div class=navigation-wrapper><div class=site-name><a href=http://www.yihangho.com>I am Yihang</a></div><div class=top-navigation><nav role=navigation itemscope itemtype=http://schema.org/SiteNavigationElement><ul><li><a href=http://www.yihangho.com/about>About</a></li><li><a href=http://www.yihangho.com/articles>Articles</a></li><li><a href=http://www.yihangho.com/apps>Apps</a></li><li><i class=icon-feed></i> <a href=http://www.yihangho.com/feed.xml title="Atom/RSS feed">Feed</a></li></ul></nav></div></div><div id=main role=main itemprop=mainContentOfPage itemscope itemtype=http://schema.org/Blog><div class=article-author-top><img src=http://www.yihangho.com/images/bio-photo.jpg class=bio-photo alt="Yihang Ho bio photo"><h3>Yihang Ho</h3><p>Coder</p><a href=http://twitter.com/yihang5 class=author-social target=_blank><i class=icon-twitter></i> Twitter</a> <a href=http://facebook.com/yihangho class=author-social target=_blank><i class=icon-facebook></i> Facebook</a> <a href="https://plus.google.com/+YihangHo/" class=author-social target=_blank><i class=icon-google-plus></i> Google+</a> <a href=http://github.com/yihangho class=author-social target=_blank><i class=icon-github></i> Github</a> <a href=mailto:me@yihangho.com class=author-social target=_blank><i class=icon-mail></i> Email</a></div><article itemscope itemtype=http://schema.org/BlogPosting itemprop=blogPost><div class=headline-wrap><h1 itemprop=name>Homebrew and ClamXav</h1><h2></h2></div><div class=article-wrap itemprop=text><p><a href="http://brew.sh/">Homebrew</a> and <a href="http://www.clamxav.com/">ClamXav</a> seem to have a <em>little</em> disagreement between them. This article is for those who:</p><ul><li>are going to install ClamXav</li><li>have just installed ClamXav and Homebrew complains something about ownership and permissions</li><li>have installed ClamXav some time ago and it cannot update anymore <img class=emoji title=worried alt=worried src=https://github.global.ssl.fastly.net/images/icons/emoji/worried.png height=20 width=20 align=absmiddle></li></ul><p>If you are just going to install ClamXav and have Homebrew installed already, please do a <code>brew doctor</code> and fix all problems first. If you are using TrueCrypt also, you might be interested to read <a href="http://www.yihangho.com/homebrew-and-truecrypt/">this article</a> also.</p><p>Immediately after you have installed ClamXav, do another <code>brew doctor</code>. Most probably you will get this message (and others if you have not fix them before installing ClamXav):</p><pre><code>Warning: The /usr/local directory is not writable.
Even if this directory was writable when you installed Homebrew, other
software may change permissions on this directory. Some versions of the
"InstantOn" component of Airfoil are known to do this.

You should probably change the ownership and permissions of /usr/local
back to your user account.
</code></pre><p>If so, just enter the following command and youâ€™re (most likely) good to go.</p><pre><code>sudo chown `whoami` /usr/local
</code></pre><p>If you have installed ClamXav and Homebrew some time ago, and ClamXav stops updating, you should continue reading. As we know, ClamXav updates its virus definition every time it is started, but this time, when it is started, <em>very</em> quickly it says that update completed, but when you run some scans, it complains that virus definition is outdated. In short, ClamXav refuses to update yet it complains that it is outdated. This problem is very likely due to permission issue on <code>/usr/local/clamXav</code>. This directory should be owned by <code>root</code>. Maybe you accidentally <code>chown</code>ed that folder when you attempt to fix some other permission issues. To fix this,</p><pre><code>sudo chown root /usr/local/clamXav
</code></pre><div style=text-align:center><p><div data-role=spritzer data-selector=div.article-wrap></div></p></div><hr><footer role=contentinfo><div class=article-author-bottom><img src=http://www.yihangho.com/images/bio-photo.jpg class=bio-photo alt="Yihang Ho bio photo"><h3>Yihang Ho</h3><p>Coder</p><a href=http://twitter.com/yihang5 class=author-social target=_blank><i class=icon-twitter></i> Twitter</a> <a href=http://facebook.com/yihangho class=author-social target=_blank><i class=icon-facebook></i> Facebook</a> <a href="https://plus.google.com/+YihangHo/" class=author-social target=_blank><i class=icon-google-plus></i> Google+</a> <a href=http://github.com/yihangho class=author-social target=_blank><i class=icon-github></i> Github</a> <a href=mailto:me@yihangho.com class=author-social target=_blank><i class=icon-mail></i> Email</a></div><p class=byline><strong>Homebrew and ClamXav</strong> was published on <time datetime=2013-08-19T00:00:00+08:00 itemprop=datePublished>August 19, 2013</time> by <span itemprop=author itemscope itemtype=http://schema.org/Person><span itemprop=name><a href=http://www.yihangho.com/about title="About Yihang Ho" itemprop=url>Yihang Ho</a></span></span>.</p></footer></div></article></div><div class=footer-wrap><div class=related-articles><h4>You might also enjoy <small class=pull-right>(<a href=http://www.yihangho.com/articles>View all articles</a>)</small></h4><ul><li><a href=http://www.yihangho.com/us-visa-application title="US Visa Application">US Visa Application</a></li><li><a href=http://www.yihangho.com/chrome-extension-development-in-a-nutshell title="Chrome Extension Development in a Nutshell">Chrome Extension Development in a Nutshell</a></li><li><a href=http://www.yihangho.com/homebrew-and-truecrypt title="Homebrew and TrueCrypt">Homebrew and TrueCrypt</a></li></ul><hr></div><footer><span>&copy; 2014 Yihang Ho. Powered by <a href=http://jekyllrb.com>Jekyll</a> using the <a href="http://mademistakes.com/">Minimal Mistakes</a> theme.</span></footer></div><script src=//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js></script><script>window.jQuery || document.write('<script src="http://www.yihangho.com/assets/js/vendor/jquery-1.11.0.min.js"><\/script>')</script><script src=http://www.yihangho.com/assets/js/scripts.min.js></script><script>window.jQuery || document.write('<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js">\x3C/script>');
  var SpritzSettings = {
    clientId: "1e621458778214a7c",
    redirectUri: "http://www.yihangho.com/login_success.html"
  };</script><script id=spritzjs src=//sdk.spritzinc.com/js/1.0/js/spritz.min.js></script><script>var _paq=_paq||[];_paq.push(["trackPageView"]);_paq.push(["enableLinkTracking"]);(function(){var u=(("https:"==document.location.protocol)?"https":"http")+"://piwik-yihangho.rhcloud.com/";_paq.push(["setTrackerUrl",u+"piwik.php"]);_paq.push(["setSiteId","1"]);var d=document,g=d.createElement("script"),s=d.getElementsByTagName("script")[0];g.type="text/javascript";g.defer=true;g.async=true;g.src=u+"piwik.js";s.parentNode.insertBefore(g,s)})();</script>